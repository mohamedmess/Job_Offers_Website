@using Microsoft.AspNet.Identity

@if(Request.IsAuthenticated)
{
    //BeginForm
    using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoff" })) // on utilise new id puisqu'on va réaliser la fonction de logout lorsqu'on clique sur le bouton
    {
        // pour sécuriser notre application contre Cross Request Forgery
        @Html.AntiForgeryToken()
        <ul class="nav navbar-nav navbar-right">
            <li>
                <!--lorsqu'on clique sur le nom, on fait appel à la page Index dans ManageController 
                    qui nous permet de Changer les paramètres de votre compte-->
               @Html.ActionLink("Welcome : " + User.Identity.GetUserName(), "Index", "Manage")
            </li>
            <li>
                <!--on utilise javaScript pour appeler la fonction LogOff dans AccountController en utilisant l'id = 'logoff'-->
                <a href="javaScript:document.getElementById('logoff').submit()">LogOut</a>
            </li>
        </ul>
    }
}
// pour que cette partie ne s'affiche pas lorsqu'on s'authentifie
else
{
    <ul class="nav navbar-nav navbar-right">
        <li>
            <a href="~/Account/Login">
                <i class="glyphicon glyphicon-user"></i>
                Login
            </a>
        </li>
        <li>
            <a href="~/Account/Register">
                <i class="glyphicon glyphicon-lock"></i>
                Register
            </a>
        </li>
    </ul>
}
<!--Cette partie sera appelée par _MainLayout-->

